\documentclass[english]{tktltiki}
\usepackage[pdftex]{graphicx}
\usepackage{subfigure}
\usepackage{url}
\usepackage{enumerate}
\usepackage{amsmath}
\usepackage{hyperref}
\begin{document}
\onehalfspacing

\title{Location Awareness - Week 4}
\author{Péter Ivanics}
\date{\today}

\maketitle

\numberofpagesinformation{\numberofpages\ pages + \numberofappendixpages\ appendices}
\keywords{}

\mytableofcontents

\section{Concepts}
	\begin{enumerate}[a)]
		\item Velocity pruning is a type of pruning (reduction of non-meaningful measurement data), where positions, in between the user was moving with high speed are not considered as meaningful places. In other words, the only meaningful places of a measurement set are the areas, where user spends significant amount of time, ergo is not moving fast. Typically a velocity threshold is given to determine the meaningful points and therefore places. 
		
		The attached $velocity_pruning.R$ script performs simple pruning on the data. Figure \ref{velocity_pruning} displays the points before and after pruning. Looking at the original dataset on the left graph it is visible that the points seem to be scattered around two places. The movement speed can be easily estimated by calculating the distance between the points and dividing the distances by the elapsed time respectively. 
		
		The velocity threshold is set to the mode of the estimated velocities ($3.8$). This seems to be a good choice in this case as the mean and the median gives worse results. By redrawing the points that exceed this value it is visually visible, that two places can be clearly identified. There are still some standalone points outside these two areas but they can not be considered as meaningful places. 
		
		\begin{figure}[h] 
			\begin{center}
				\includegraphics[width=0.75\textwidth]{images/velocity_pruning.png}
				\caption{The scatter plot of the points before (left) and after (right) the velocity pruning.}
				\label{velocity_pruning}
			\end{center}
		\end{figure}
	\item The $q$ value in the Markov chain refers to the order/memory of the model. The probability of state $x_k$ is given by the probability $p(x_k | x_{1:k-1})=p(x_k | x_{k-q-1:k-1})$	, where $x_k$ is the state of the system at time $k$, $q$ is the order of the model. In other words this means, to estimate the probability $k^{th}$ system state, $q$ number of previous observations observations are utilized. Accordingly, the first order Markov model relies only on the last observation, while a model of the $q^{th}$ order would extend the estimations with previously collected data.
		
		\item The probability transition matrices are displayed in Table \ref{probability_matrices}. The result is generated by the attached $markov_chain.R$ script. If the user is located at Shop, the most likely place to visit next for $q=1$ is Work (50 \% chance), for $q=2$ the most likely place is Shop (50 \% chance). 
		
		To tell the most likely place in the case when the user visits Work before the Shop, the transition matrices have to be recalculated. In this case, for $q=1$ the next place is expected to be Work (55 \% chance), for $q=2$, the most likely place is Shop (50 \% chance).
		\begin{table}[]
		\centering
		\caption{The probability transition matrices of Markov Models of order one and order two for item c). }
		\label{probability_matrices}
			\begin{tabular}{rrrr}
 				\textbf{q = 1} & Home & Work & Shop \\ 
  				\hline
					Home & 0.00 & 0.64 & 0.36 \\ 
 					Work & 0.50 & 0.00 & 0.50 \\ 
  					Shop & 0.40 & 0.50 & 0.10 \\ 
   				\hline
   				\\
   				\textbf{q = 2} & Home & Work & Shop \\ 
  				\hline
					Home & 0.45 & 0.27 & 0.27 \\ 
  					Work & 0.18 & 0.55 & 0.27 \\ 
  					Shop & 0.30 & 0.20 & 0.50 \\ 
   				\hline
			\end{tabular}	
			\end{table}
		
	\end{enumerate}
\section{Fingerprint-Based Place Detection}
		\begin{enumerate}[a)]
			\item The calculated probabilities are displayed in Table \ref{tanimoto}. The matrix is the output of the $fingerprint_based_detection.R$ script file. It is clearly visible that the access point number 3 has significantly lower probabilities in comparison to the other observations. This allows the conclusion that this access point has to be further away from the others and therefore at least two distinct places can be identified from the calculations.
		
				\begin{table}[]
					\centering
					\caption{The results of the extended Tanimoto calculations for the given access points and observations.}
					\label{tanimoto}
					\begin{tabular}{rrrrrrrrrrr}
						& 1 & 2 & 3 & 4 & 5 & 6 & 7 & 8 & 9 & 10 \\ 
  						\hline
						  1 & 1.00 & 0.98 & 0.86 & 0.98 & 0.98 & 0.98 & 0.98 & 0.99 & 0.93 & 0.91 \\ 
						  2 &  & 1.00 & 0.84 & 0.99 & 0.96 & 0.98 & 0.99 & 0.99 & 0.91 & 0.90 \\ 
						  3 &  &  & 1.00 & 0.84 & 0.87 & 0.86 & 0.85 & 0.86 & 0.77 & 0.75 \\ 
						  4 &  &  &  & 1.00 & 0.96 & 0.98 & 0.99 & 0.99 & 0.92 & 0.91 \\ 
						  5 &  &  &  &  & 1.00 & 0.99 & 0.97 & 0.99 & 0.90 & 0.89 \\ 
						  6 &  &  &  &  &  & 1.00 & 0.99 & 0.99 & 0.91 & 0.90 \\ 
						  7 &  &  &  &  &  &  & 1.00 & 0.99 & 0.92 & 0.90 \\ 
						  8 &  &  &  &  &  &  &  & 1.00 & 0.93 & 0.91 \\ 
						  9 &  &  &  &  &  &  &  &  & 1.00 & 0.98 \\ 
						  10 &  &  &  &  &  &  &  &  &  & 1.00 \\ 
 	  					\hline
					\end{tabular}
				\end{table}
			\end{enumerate}	

\section{Lempel-Ziv}

\section{Spatial Analysis: Preprocessing and Place Detection}
	
\nocite{*}
\bibliographystyle{tktl}
\bibliography{lahteet}

\lastpage

\pagestyle{empty}

\end{document}